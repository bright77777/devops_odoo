# ====================================================================
# ODOO BACKUP/RESTORE INFRASTRUCTURE - CONFIGURATION FILE
# ====================================================================
#
# ‚ö†Ô∏è  IMPORTANT SECURITY NOTES:
# - Cette fichier contient des secrets sensibles
# - NE JAMAIS commit ceci dans Git
# - NE JAMAIS partager cet fichier
# - Permissions: chmod 600 .env
# 
# COMMENT UTILISER CE FICHIER:
# 1. Copier .env.example en .env: cp .env.example .env
# 2. √âditer ce fichier avec vos vraies valeurs
# 3. Ne jamais commit .env (assurez-vous que .gitignore l'exclude)
# 4. Lancer ./scripts/setup.sh
#
# ====================================================================

# ====================================================================
# 1. POSTGRESQL CONFIGURATION
# ====================================================================
# Utilisateur PostgreSQL: "odoo" (√† garder tel quel en g√©n√©ral)
# Mot de passe PostgreSQL: G√©n√©rer un mot de passe fort
#
# G√©n√©rer un mot de passe:
#   openssl rand -base64 32
#
# Exemple:
#   POSTGRES_PASSWORD=XyZaBcDeFgHiJkLmNoPqRsTuVwXyZaBcDeFgHiJkLm
#
# üìã √Ä REMPLIR:
POSTGRES_USER=odoo
POSTGRES_PASSWORD=your_secure_password_here

# Nom de la base de donn√©es
POSTGRES_DB=odoo

# ====================================================================
# 2. ODOO CONFIGURATION
# ====================================================================
# Mot de passe administrateur Odoo
# G√©n√©rer un mot de passe fort (minimum 16 caract√®res)
#
# G√©n√©rer un mot de passe:
#   openssl rand -base64 32
#
# ‚ö†Ô∏è  IMPORTANT: Vous devez changer ce mot de passe apr√®s le 1er login
#
# üìã √Ä REMPLIR:
ODOO_ADMIN_PASSWORD=your_odoo_admin_password_here

# Nombre de workers Odoo (processus parall√®les)
# Recommandations:
#   - 2 vCPU   ‚Üí 2 workers
#   - 4 vCPU   ‚Üí 4-6 workers
#   - 8+ vCPU  ‚Üí 8-12 workers
ODOO_WORKERS=4

# Timeout des requ√™tes (en secondes)
# Augmenter si vous avez des requ√™tes longues
ODOO_TIMEOUT=600

# ====================================================================
# 3. CLOUDFLARE R2 CONFIGURATION
# ====================================================================
# R2 est un service de stockage objet compatible S3 de Cloudflare
#
# üìã COMMENT OBTENIR CES VALEURS:
#
# 1. Aller √†: https://dash.cloudflare.com/
# 2. S√©lectionner votre compte
# 3. Aller √†: R2 (en bas √† gauche)
# 4. Cr√©er un bucket (ex: "my-company-odoo-backups") si ce n'est pas fait
# 5. Aller √†: R2 ‚Üí Settings ‚Üí API Tokens
# 6. Cr√©er un nouveau token:
#    - Nom: "Odoo Backup Token"
#    - Permissions: "Admin" (ou limiter √† R2 seulement)
#    - TTL: "Never expires" (ou 90 jours, √† votre choix)
# 7. Copier les values ci-dessous
#
# ‚ö†Ô∏è  IMPORTANT:
# - Garder ces credentials SECR√àTES
# - Ne pas les commit dans Git
# - Utiliser un token d√©di√©, pas le master token
# - Rotation des credentials tous les 90 jours
#
# üìã √Ä REMPLIR:

# URL de l'endpoint R2 (visible dans le dashboard R2)
# Format: https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com
CF_R2_ENDPOINT=https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com

# Nom du bucket R2 (cr√©√© dans le dashboard R2)
CF_R2_BUCKET=your-bucket-name

# Access Key ID (depuis API Token)
CF_R2_ACCESS_KEY_ID=your_r2_access_key_id

# Secret Access Key (depuis API Token)
CF_R2_SECRET_ACCESS_KEY=your_r2_secret_access_key

# ====================================================================
# 4. BACKUP CONFIGURATION
# ====================================================================

# Dur√©e de r√©tention des backups (en jours)
# Les backups plus vieux seront supprim√©s automatiquement
# D√©faut: 30 jours (garde ~1 mois de backups)
BACKUP_RETENTION_DAYS=30

# Schedule du cron pour les backups automatiques
# Format Cron Unix: MM HH DOM MON DOW
#
# Exemples:
#   "0 2 * * *"       ‚Üí Tous les jours √† 02:00
#   "0 2 */5 * *"     ‚Üí Tous les 5 jours √† 02:00 (d√©faut)
#   "0 2 * * 0"       ‚Üí Tous les dimanches √† 02:00
#   "0 2 */7 * *"     ‚Üí Toutes les semaines √† 02:00
#   "0 */6 * * *"     ‚Üí Toutes les 6 heures
#
# D√©faut: Tous les 5 jours √† 02:00 (heure serveur)
BACKUP_SCHEDULE="0 2 */5 * *"

# ====================================================================
# 5. NOTES DE S√âCURIT√â
# ====================================================================
#
# ‚úÖ CHECKLIST DE S√âCURIT√â:
#
# 1. Avant de remplir ce fichier:
#    - [ ] G√©n√©rer des mots de passe forts
#    - [ ] Cr√©er un bucket R2 d√©di√©
#    - [ ] Cr√©er un token R2 avec permissions minimales
#
# 2. Apr√®s avoir rempli ce fichier:
#    - [ ] chmod 600 .env  (permissions restrictives)
#    - [ ] V√©rifier que .env n'est pas stag√© pour Git
#    - [ ] Ne pas partager ce fichier
#    - [ ] Stocker un backup chiffr√© de .env en lieu s√ªr
#
# 3. En production:
#    - [ ] Utiliser un gestionnaire de secrets (Vault, AWS Secrets Manager)
#    - [ ] Rotation des credentials tous les 90 jours
#    - [ ] Logging des acc√®s √† ce fichier
#    - [ ] Alertes si acc√®s non autoris√©
#
# ====================================================================

# ====================================================================
# 6. V√âRIFICATION
# ====================================================================
#
# Une fois que vous avez rempli ce fichier:
#
# 1. V√©rifier la syntaxe:
#    source .env && echo "‚úÖ OK"
#
# 2. V√©rifier que Docker est install√©:
#    docker --version
#
# 3. V√©rifier la permission du fichier:
#    ls -la .env  (devrait √™tre -rw-------)
#
# 4. Lancer le setup:
#    ./scripts/setup.sh
#
# ====================================================================
